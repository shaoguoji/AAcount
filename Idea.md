# AAcount 去中心化透明的链上集体账本收付款与分配服务

## 介绍

AAcount 是一个基于以太坊的去中心化应用，它提供了一个透明的集体账本收付款与分配服务。解决了传统集体账本的痛点，如：账户权限中心化、交易记录不透明等问题，可运用于活动报名分费、支出分摊等场景。

## 概念

核心概念有资金池、规则、组织者、参与者、创建者。

### 资金池

资金池是 AAcount 的核心概念，它是一个去中心化的集体账本，用于存储和管理集体的资产。资金池中的资产可以是任何 ERC20 代币，也可以是 ETH。

### 创建者

创建者是资金池的创建者，他拥有资金池的完全控制权，可以添加成员、修改资金池的配置等。创建者可对一个资金池创建不同类型交易规则，如：转入规则（收款）、转出规则（资金结算分配、报销）。

### 组织者

组织者是资金池的组织者，他可以向资金池中转入资产或者新增待报销项目，接收资金池分配或者报销。

### 参与者

参与者是资金池的参与者，他可以向资金池中转入资产，接收资金池退款。并且参与者可以在资金池中执行打卡操作（如活动签到，需要参与者本人私钥签名）。

### 规则

规则是资金池操作规则，它定义了资金池的增减、分配等操作。交易规则分为转入规则和转出规则。

#### 转入规则

转入规则是资金池的转入规则，它定义了资金池的余额增加操作。包含以下：

1. 收款（如报名费、活动费等）
2. 存款（如活动赞助、捐款等）

#### 转出规则

转出规则是资金池的转出规则，它定义了资金池的分配操作。包含以下：

1. 资金结算分配（如活动费用、报销等）
2. 资金退款（如活动取消、退款等）

## 应用场景示例

### 应用场景1:活动收费、报销与盈利分配

A、B、C 三个组织共同办一场技术沙龙活动，选出一名创建者在 AAcount 中创建一个资金池，设置报名付款规则、存款规则和利润分配规则，同时添加 A、B、C 为组织者，或有赞助或者资金支持，三个组织者可以向使用存款规则向资金池中转入资产。活动开始前，A 负责场地花费 200u，B 负责活动策划花费 100u，C 负责活动执行花费 500u。则他们分别在资金池中注册一个待报销项目，用于记录各自的支出，在进行清算的时候获得相应的报销退款收入。活动开始宣传期间，由组织者创建一个名为「收取报名费」的规则（转入规则），用于发布活动时给参与者支付页面付款。假设报名费为30u，一共60人报名接收了1800u。那么活动结束后开始清算时，先从资金池中扣除场地、活动策划、活动执行的费用，退还给报销人，再将剩余的1000u平均分配给三个组织者。

### 应用场景2:100天读书打卡返现

假设组织者 A 为了能让更多人坚持阅读书籍，发起了一个名为「100天读书打卡」的活动，并在 AAcount 中创建一个资金池同时设置报名付款规则和返还规则，参与者需要预缴一笔押金到资金池，活动开始后的100天内每天都要进行打卡操作。结束后根据参与者打卡天数进行返还（或者没收未完成者押金再分配）。

更多应用场景如产品众筹等有待探索。

## 技术实现

技术架构使用以太坊 EVM 智能合约保证资金池的透明性和安全性，同时确保交易规则由代码保证执行。所有数据使用链上存储，完全实现去中心化。

### 技术栈

采用前端+合约的架构。

1. 以太坊 EVM 智能合约，使用 Solidity 编写 foundry 框架管理
2. 前端使用 React + Vite 框架，使用 viem wagmi 和 rainbowkit 等库

### 模块划分与页面设计

主页：AAcount landing page，展示 AAcount 的功能和使用方法，包括创建资金池、添加成员、添加交易规则等作为产品介绍。

pools：展示当前链上所有资金池，用户可以点击进入资金池详情页，显示当前资金池的附加信息创建者、组织者、参与者、资金池中正在执行的交易规则（付款、退款、报销等）和资金池的余额，历史交易记录等等等等，所有信息都通过智能合约获取。存储在链上的 storge 或者 receipt 中，若资金池需要用户打卡，应该提供一个打卡页面。

用户后台：需要连接用户钱包（metamask），显示当前用户创建的资金池、加入的资金池、交易记录等等。对于创建者，还应该提供对资金池的管理功能，如添加成员、修改交易规则、执行规则等。对于组织者，应该提供添加待报销项目。

规则页面：所有规则都有自己的详情页，对于付款类型规则，提供交互给用户进行付款操作（如付款信息付款金额等），付款后，智能合约会检查是否付款成功，并将交易记录存储在链上，同时公开显示支付人列表、付款交易记录列表。待后续进行分配。若有组织者发起报销，会自动生成报销规则，记录报销人地址和金额。

交易记录：对于资金池、规则，在其详情页显示与之相关的交易记录。




